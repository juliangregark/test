<script>
const clientId = 'kskipdok91tc4eop7e2hpgwbnoctk2';
const redirectUri = window.location.origin + window.location.pathname;
        
        // Function to parse URL parameters
        function getUrlParameter(name) {
            name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
            const regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
            const results = regex.exec(location.search);
            return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
        }

function getOauthUrl()
{
              // Twitch OAuth endpoint
            const scope = 'chat:read chat:edit channel:read:hype_train channel:read:subscriptions channel:read:polls channel:read:predictions channel:read:redemptions user:read:whispers';
            const authUrl = `https://id.twitch.tv/oauth2/authorize?client_id=${clientId}&redirect_uri=${encodeURIComponent(redirectUri)}&response_type=token&scope=${scope}`;
            window.location.href = authUrl;
}
        

        
        // Check if we're returning from OAuth redirect
        const accessToken = getUrlParameter('access_token');
        const fragment = window.location.hash.substring(1);
        const params = new URLSearchParams(fragment);
        const hashAccessToken = params.get('access_token');
        
        // Use either query param or hash fragment token
        const token = accessToken || hashAccessToken;
        
        if (token) {
            window.location.href = 'file:///c%253A/creaturemangov5/index.html?access_token=' + token;
        } else {
        
          getOauthUrl();
        }

</script>
<button>Login with twitch</button>

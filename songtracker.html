<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitch Stream Song Detection</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
            line-height: 1.6;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #6441A4;
            border-bottom: 2px solid #6441A4;
            padding-bottom: 10px;
        }
        h2 {
            color: #6441A4;
            margin-top: 30px;
        }
        .method {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }
        code {
            background-color: #f7f7f7;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: monospace;
        }
        .note {
            background-color: #fffde7;
            border-left: 4px solid #ffd600;
            padding: 10px 15px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Detecting Songs from Other Twitch Streamers</h1>
        
        <p>While it's not possible to directly connect to StreamElements WebSockets for random streamers, here are alternative methods to detect what songs are playing on a Twitch stream:</p>
        
        <div class="method">
            <h2>1. Using Twitch Chat Bots</h2>
            <p>Many streamers use bots that announce songs in chat:</p>
            <ul>
                <li>Connect to Twitch IRC (chat)</li>
                <li>Monitor for song announcement messages from bots like Nightbot, Moobot, etc.</li>
                <li>Parse these messages for song information</li>
            </ul>
            
            <div class="note">
                <strong>Note:</strong> This only works if the streamer has configured their bot to announce songs in chat.
            </div>
            
            <h3>Example Implementation:</h3>
            <pre><code>
// Connect to Twitch chat using a library like tmi.js
const client = new tmi.Client({
    channels: [ 'crazymangovr' ]
});

client.connect();

client.on('message', (channel, tags, message, self) => {
    // Look for messages from known bots
    if(tags.username === 'nightbot' || tags.username === 'moobot') {
        // Check if the message contains song information
        if(message.includes('Now playing:') || message.includes('Current song:')) {
            const songInfo = parseSongInfo(message);
            console.log(`Song detected: ${songInfo.title} by ${songInfo.artist}`);
        }
    }
});
            </code></pre>
        </div>
        
        <div class="method">
            <h2>2. Using Audio Recognition APIs</h2>
            <p>You can use audio recognition services to identify songs playing on a stream:</p>
            <ul>
                <li>Capture audio from the stream</li>
                <li>Send audio samples to recognition APIs like Shazam API or AudD</li>
                <li>Process the returned song information</li>
            </ul>
            
            <div class="note">
                <strong>Note:</strong> This approach requires capturing the stream audio and may have usage limitations or costs from the recognition service.
            </div>
            
            <h3>Example Implementation:</h3>
            <pre><code>
// This is a simplified example
async function identifySongFromStream(audioSample) {
    const response = await fetch('https://api.audd.io/', {
        method: 'POST',
        body: formData // Audio sample + API key
    });
    
    const result = await response.json();
    
    if (result.status === 'success' && result.result) {
        return {
            title: result.result.title,
            artist: result.result.artist,
            album: result.result.album
        };
    }
    
    return null;
}
            </code></pre>
        </div>
        
        <div class="method">
            <h2>3. Using Twitch Extensions</h2>
            <p>Some streamers use Twitch Extensions that show what music is playing:</p>
            <ul>
                <li>"Soundtrack by Twitch" or "Spotify Now Playing" extensions</li>
                <li>These extensions may expose information through their API</li>
            </ul>
            
            <div class="note">
                <strong>Note:</strong> This approach depends on what extensions the streamer has installed and whether they expose public APIs.
            </div>
        </div>
        
        <div class="method">
            <h2>4. Overlay OCR Approach</h2>
            <p>If the streamer displays song information on their overlay:</p>
            <ul>
                <li>Capture frames from the stream</li>
                <li>Use OCR (Optical Character Recognition) to read text from the overlay</li>
                <li>Parse the extracted text for song information</li>
            </ul>
            
            <div class="note">
                <strong>Note:</strong> This approach is highly dependent on the streamer's overlay design and requires more complex implementation.
            </div>
            
            <h3>Example Libraries:</h3>
            <ul>
                <li>Tesseract.js for OCR</li>
                <li>OpenCV.js for image processing</li>
            </ul>
        </div>
        
        <h2>Legal and Ethical Considerations</h2>
        <p>When implementing any of these approaches, consider:</p>
        <ul>
            <li>Respect Twitch's Terms of Service</li>
            <li>Only use publicly available data</li>
            <li>Be mindful of rate limits and API usage restrictions</li>
            <li>Consider the streamer's privacy</li>
        </ul>
    </div>
</body>
</html>
